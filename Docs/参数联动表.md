# 参数—影响—建议联动表

本文档列出 rjw-cummilk（Equal Milking）高级设置中主要参数的**影响逻辑**与**建议联动**，便于社区维护、本地化与玩家调参。  
对应《建议评估与采纳意见》中的 **23️⃣ 默认设定与社区/本地化一致**。

---

## 一、泌乳池与流速

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| baselineMilkDurationDays | 药物诱发泌乳的基准持续天数（池模型 B_T）；与 L 衰减、剩余天数显示一致 | 与 birthInducedMilkDurationDays、L 驱动公式 |
| birthInducedMilkDurationDays | 分娩诱发泌乳的参考持续天数（B_T_分娩）；仅作参考展示 | 与 baselineMilkDurationDays、池模型说明 |
| lactatingEfficiencyMultiplierPerStack | 每层 Lactating 堆叠的泌乳效率倍率 | 与流速/剩余天数、HediffWithComps_EqualMilkingLactating.GenStage |
| defaultFlowMultiplierForHumanlike | 人形小人的流速倍率（flowPerDay 乘数） | 与种族覆盖、RJW/种族 mod 平衡 |

---

## 二、乳腺炎与风险（MilkRiskSettings）

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| allowMastitis | 是否启用乳腺炎/堵塞判定；关闭则 TryTriggerMastitis 不触发 | 与 Dubs Bad Hygiene、卫生/满池逻辑 |
| mastitisBaseMtbDays | 乳腺炎基准 MTB（天）；越大越不易发生 | 与 overFullnessRiskMultiplier、hygieneRiskMultiplier、营养缓解 |
| overFullnessRiskMultiplier | 长时间满池时 MTB 除数；越大风险越高 | 与 ticksFullPool 阈值、溢出处理 |
| hygieneRiskMultiplier | 卫生差时 MTB 除数；与 DBH hygiene 或房间清洁度联动 | 与 useDubsBadHygieneForMastitis |
| mastitisMtbDaysMultiplierHumanlike | 人形小人的 MTB 乘数；>1 降低乳腺炎频率 | 与 mastitisBaseMtbDays |
| mastitisMtbDaysMultiplierAnimal | 动物的 MTB 乘数；当前仅人形触发乳腺炎时可作预留 | 与 allowMastitis、种族逻辑 |

---

## 三、耐受与泌乳效率

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| allowToleranceAffectMilk | 是否让催乳素耐受影响泌乳；关闭则 E_tol = 1 | 与 EM_Prolactin_Tolerance、GetProlactinToleranceFactor |
| toleranceFlowImpactExponent | E_tol(t) = [max(1−t, 0.05)]^exponent；1=线性，&lt;1 更平滑 | 与耐受 Hediff 严重度、流速/剩余天数 |

---

## 四、溢出与 AI

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| overflowFilthDefName | 满池溢出时生成的地面污物 Def 名称 | 与流体/污物 mod、翻译 |
| aiPreferHighFullnessTargets | 挤奶/吸奶 job 是否优先满度更高的目标 | 与 WorkGiver、PotentialWorkThingsGlobal 排序 |

---

## 五、种族与兼容

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| raceCanAlwaysLactate | 视为可产奶的种族 defName 白名单（逗号分隔） | 与 IsMilkable、GetMilkProductDef |
| raceCannotLactate | 视为不可产奶的种族 defName 黑名单 | 与 raceCanAlwaysLactate、RJW/种族 mod |
| femaleAnimalAdultAlwaysLactating | 雌性成年动物是否默认视为可泌乳 | 与动物挤奶、奶制品来源 |

---

## 六、默认值参考（与规格对齐）

| 参数 | 默认值 | 说明 |
|------|--------|------|
| baselineMilkDurationDays | 3 | 药物泌乳基准持续时间（B_T） |
| birthInducedMilkDurationDays | 10 | 分娩泌乳参考持续时间（B_T_分娩） |
| allowMastitis | true | 是否启用乳腺炎 |
| mastitisBaseMtbDays | 1.5 | 乳腺炎基准 MTB（天） |
| overFullnessRiskMultiplier | 1.5 | 满池过久风险系数 |
| hygieneRiskMultiplier | 1 | 卫生风险系数 |
| mastitisMtbDaysMultiplierHumanlike | 1 | 人形 MTB 乘数 |
| mastitisMtbDaysMultiplierAnimal | 1 | 动物 MTB 乘数 |
| allowToleranceAffectMilk | true | 耐受是否影响泌乳 |
| toleranceFlowImpactExponent | 1 | 耐受影响指数（线性） |
| defaultFlowMultiplierForHumanlike | 1 | 人形流速倍率 |
| aiPreferHighFullnessTargets | true | 优先高满度目标 |
| overflowFilthDefName | Filth_Vomit | 溢出污物 Def |

---

以上参数均可通过 Mod 设置保存；关键默认值另见 `EqualMilkingDefaultsDef`（Defs/EqualMilkingDefaults.xml），其他 mod 可通过 PatchOperation 覆盖。
