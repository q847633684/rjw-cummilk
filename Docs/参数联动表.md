# 参数—影响—建议联动表

本文档列出 rjw-cummilk（Equal Milking）高级设置中主要参数的**影响逻辑**与**建议联动**，便于社区维护、本地化与玩家调参。  
对应《建议评估与采纳意见》中的 **23️⃣ 默认设定与社区/本地化一致**。

---

## 一、泌乳池与流速

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| baselineMilkDurationDays | 药物诱发泌乳的基准持续天数；**参与 L 衰减**：B_T 由此反推，**单次剂量**（L≈0.5）时剩余天数 ≈ 本值；**默认 5**（约 5 日）。多剂叠加时 L 增加但 D 也增大，总天数 &lt; 剂数×基准 | 与 birthInducedMilkDurationDays、L 驱动公式、GetEffectiveBaseValueTForDecay |
| defaultFlowMultiplierForHumanlike | 流速倍率（flowPerDay 乘数）；**默认 2** 时单次剂量约 1 游戏日灌满基础容量；同时影响灌满期营养/能量消耗。在「联动与扩展 → 乳房与池」调整 | 与 baselineMilkDurationDays、双池流速、乳房容量模拟计算、种族覆盖 |
| birthInducedMilkDurationDays | 分娩诱发泌乳的参考持续天数（B_T_分娩）；仅作参考展示 | 与 baselineMilkDurationDays、池模型说明 |
| lactatingEfficiencyMultiplierPerStack | 每层 Lactating 堆叠的泌乳效率倍率 | 与流速/剩余天数、HediffWithComps_EqualMilkingLactating.GenStage |

---

## 二、RJW 乳房与容量

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| rjwBreastSizeEnabled | 总开关：泌乳期临时增大 RJW 乳房 Severity（+0.15）；且是否用 RJW 乳房数据算池容量与流速 | 与 GetBreastCapacityFactors、GetMilkFlowMultiplierFromRJW_Left/Right、RJWLactatingBreastSize |
| rjwBreastCapacityCoefficient | 乳房容量系数：左/右池容量 = RJW Severity × 本系数（默认 2） | 与 GetBreastCapacityFactors、maxFullness；见 Docs/乳房容量模拟计算.md |

---

## 三、乳腺炎与风险（MilkRiskSettings）

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| allowMastitis | 是否启用乳腺炎/堵塞判定；关闭则 TryTriggerMastitis 不触发 | 与 Dubs Bad Hygiene、卫生/满池逻辑 |
| mastitisBaseMtbDays | 乳腺炎基准 MTB（天）；越大越不易发生 | 与 overFullnessRiskMultiplier、hygieneRiskMultiplier、营养缓解 |
| overFullnessRiskMultiplier | 长时间满池时 MTB 除数；越大风险越高 | 与 ticksFullPool 阈值、溢出处理 |
| hygieneRiskMultiplier | 卫生差时 MTB 除数；与 DBH hygiene 或房间清洁度联动 | 与 useDubsBadHygieneForMastitis |
| mastitisMtbDaysMultiplierHumanlike | 人形小人的 MTB 乘数；>1 降低乳腺炎频率 | 与 mastitisBaseMtbDays |
| mastitisMtbDaysMultiplierAnimal | 动物的 MTB 乘数；当前仅人形触发乳腺炎时可作预留 | 与 allowMastitis、种族逻辑 |

---

## 四、耐受与泌乳效率

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| allowToleranceAffectMilk | 是否让催乳素耐受影响泌乳；关闭则 E_tol = 1 | 与 EM_Prolactin_Tolerance、GetProlactinToleranceFactor |
| toleranceFlowImpactExponent | E_tol(t) = [max(1−t, 0.05)]^exponent；1=线性，&lt;1 更平滑 | 与耐受 Hediff 严重度、流速/剩余天数 |

---

## 五、溢出与 AI

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| overflowFilthDefName | 满池溢出时生成的地面污物 Def 名称 | 与流体/污物 mod、翻译 |
| aiPreferHighFullnessTargets | 挤奶/吸奶 job 是否优先满度更高的目标 | 与 WorkGiver、PotentialWorkThingsGlobal 排序 |

---

## 六、种族与兼容

| 参数 | 影响逻辑 | 建议联动 |
|------|----------|----------|
| raceCanAlwaysLactate | 视为可产奶的种族 defName 白名单（逗号分隔） | 与 IsMilkable、GetMilkProductDef |
| raceCannotLactate | 视为不可产奶的种族 defName 黑名单 | 与 raceCanAlwaysLactate、RJW/种族 mod |
| femaleAnimalAdultAlwaysLactating | 雌性成年动物是否默认视为可泌乳 | 与动物挤奶、奶制品来源 |

---

## 七、默认值参考（与规格对齐）

| 参数 | 默认值 | 说明 |
|------|--------|------|
| baselineMilkDurationDays | 5 | 药物泌乳基准持续时间（单次剂量剩余约 5 日） |
| defaultFlowMultiplierForHumanlike | 2 | 流速倍率（单次剂量约 1 日灌满） |
| birthInducedMilkDurationDays | 10 | 分娩泌乳参考持续时间（B_T_分娩） |
| allowMastitis | true | 是否启用乳腺炎 |
| mastitisBaseMtbDays | 1.5 | 乳腺炎基准 MTB（天） |
| overFullnessRiskMultiplier | 1.5 | 满池过久风险系数 |
| hygieneRiskMultiplier | 1 | 卫生风险系数 |
| mastitisMtbDaysMultiplierHumanlike | 1 | 人形 MTB 乘数 |
| mastitisMtbDaysMultiplierAnimal | 1 | 动物 MTB 乘数 |
| allowToleranceAffectMilk | true | 耐受是否影响泌乳 |
| toleranceFlowImpactExponent | 1 | 耐受影响指数（线性） |
| defaultFlowMultiplierForHumanlike | 2 | 人形流速倍率 |
| rjwBreastSizeEnabled | true | 泌乳期增大 RJW 乳房且用 RJW 数据算容量/流速 |
| rjwBreastCapacityCoefficient | 2 | 乳房容量系数（左/右池容量 = Severity × 本值） |
| aiPreferHighFullnessTargets | true | 优先高满度目标 |
| overflowFilthDefName | Filth_Vomit | 溢出污物 Def |

---

以上参数均可通过 Mod 设置保存；关键默认值另见 `EqualMilkingDefaultsDef`（Defs/EqualMilkingDefaults.xml），其他 mod 可通过 PatchOperation 覆盖。
